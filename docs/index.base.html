<html>
  <body style="overflow: hidden">
    <canvas></canvas>
  </body>
  <script>
    var e=document.querySelector("canvas"),t=e.width=this.innerWidth,i=e.height=this.innerHeight,n=0,l=0,h=0,o=0,a=a=t/2-5,r=i/2,s=1&new Date?4:-4,c=1&new Date?4:-4,d=0,y=0,f=100,g=10,k=Math.min,m=Math.max,p=this.requestAnimationFrame,u=this.addEventListener,w=e.getContext("2d");h=o=a=t/2-50,w.font="40px Arial",u("resize",(()=>{t=e.width=this.innerWidth,i=e.height=this.innerHeight}));let v={};var x=e=>{v[e.keyCode]="keydown"==e.type,console.log("keyMap in listener",v)};u("keydown",x),u("keyup",x),e.ontouchmove=e=>{h=e.touches[0].clientX-50};let M,R=e=>{M||(M=e),e-M>1e3/60&&(console.log("keyMap in step",v),v[37]&&(n-=15),v[39]&&(n+=15),c>0&&(o+50-a+5>0&&(l-=5),o+50-a+5<10&&(l+=5)),h=k(m(h+n,0),t-f),o=k(m(o+l,0),t-f),(a<0||a>t-g)&&(s*=-1),(r<-10||r>i-g)&&(c*=-1,r>0&&d++,r<0&&y++,a=t/2,r=i/2),a>h&&a<h+f&&r<=g&&(c=k(-1.1*c,g)),a>o&&a<o+f&&r>=i-25&&(c=k(-1.1*c,g)),a+=s,r+=c,w.clearRect(0,0,t,i),w.fillStyle="#000",w.fillRect(h,0,f,g),w.fillRect(o,i-20,f,g),w.fillRect(a,r,g,g),w.fillStyle="#777",w.fillText(d,t/2-g,f),w.fillText(y,t/2-g,i-f),n=l=0,M=e),p(R)};p(R);
  </script>
</html>