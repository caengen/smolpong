<html>
  <body style="overflow: hidden">
    <canvas></canvas>
  </body>
  <script>
    var e=document.querySelector("canvas"),t=e.width=this.innerWidth,i=e.height=this.innerHeight,n=0,l=0,h=0,o=0,a=.004,r=r=t/2-5,s=i/2,c=1&new Date?t*a:-t*a,d=1&new Date?i*a:-i*a,y=0,f=0,g=100,k=10,m=Math.min,p=Math.max,u=this.requestAnimationFrame,w=this.addEventListener,v=e.getContext("2d");h=o=r=t/2-50,v.font="40px Arial",w("resize",(()=>{t=e.width=this.innerWidth,i=e.height=this.innerHeight}));let x={};var M=e=>{x[e.keyCode]="keydown"==e.type,console.log("keyMap in listener",x)};w("keydown",M),w("keyup",M),e.ontouchmove=e=>{h=e.touches[0].clientX-50};let R,S=e=>{R||(R=e),e-R>1e3/60&&(console.log("keyMap in step",x),x[37]&&(n-=15),x[39]&&(n+=15),d>0&&(o+50-r+5>0&&(l-=5),o+50-r+5<10&&(l+=5)),h=m(p(h+n,0),t-g),o=m(p(o+l,0),t-g),(r<0||r>t-k)&&(c*=-1),(s<-10||s>i-k)&&(d*=-1,s>0&&y++,s<0&&f++,r=t/2,s=i/2),r>h&&r<h+g&&s<=k&&(d=m(-1.1*d,k)),r>o&&r<o+g&&s>=i-25&&(d=m(-1.1*d,k)),r+=c,s+=d,v.clearRect(0,0,t,i),v.fillStyle="#000",v.fillRect(h,0,g,k),v.fillRect(o,i-20,g,k),v.fillRect(r,s,k,k),v.fillStyle="#777",v.fillText(y,t/2-k,g),v.fillText(f,t/2-k,i-g),n=l=0,R=e),u(S)};u(S);
  </script>
</html>