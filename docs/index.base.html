<html>
  <body style="overflow: hidden">
    <canvas></canvas>
  </body>
  <script>
    var e=document.querySelector("canvas"),t=e.width=this.innerWidth,i=e.height=this.innerHeight,n=0,l=0,h=0,o=0,a=a=t/2-5,r=i/2,s=1&new Date?4:-4,c=1&new Date?4:-4,d=0,y=0,f=100,g=10,m=Math.min,k=Math.max,p=this.requestAnimationFrame,w=this.addEventListener,u=e.getContext("2d");h=o=a=t/2-50,u.font="40px Arial",w("resize",(()=>{t=e.width=this.innerWidth,i=e.height=this.innerHeight}));let v={};var x=e=>{v[e.keyCode]="keydown"==e.type,console.log("keyMap in listener",v)};w("keydown",x),w("keyup",x),e.onmousemove=e=>{h=e.clientX-50};let M,R=e=>{M||(M=e),e-M>1e3/60&&(console.log("keyMap in step",v),v[37]&&(n-=15),v[39]&&(n+=15),c>0&&(o+50-a+5>0&&(l-=5),o+50-a+5<10&&(l+=5)),h=m(k(h+n,0),t-f),o=m(k(o+l,0),t-f),(a<0||a>t-g)&&(s*=-1),(r<-10||r>i-g)&&(c*=-1,r>0&&d++,r<0&&y++,a=t/2,r=i/2),a>h&&a<h+f&&r<=g&&(c=m(-1.1*c,g)),a>o&&a<o+f&&r>=i-25&&(c=m(-1.1*c,g)),a+=s,r+=c,u.clearRect(0,0,t,i),u.fillStyle="#000",u.fillRect(h,0,f,g),u.fillRect(o,i-20,f,g),u.fillRect(a,r,g,g),u.fillStyle="#777",u.fillText(d,t/2-g,f),u.fillText(y,t/2-g,i-f),n=l=0,M=e),p(R)};p(R);
  </script>
</html>