<html>
  <body style="overflow: hidden">
    <canvas></canvas>
  </body>
  <script>
    var e=document.querySelector("canvas"),t=e.width=this.innerWidth,i=e.height=this.innerHeight,l=0,n=0,h=0,a=0,r=r=t/2-5,o=i/2,s=1&new Date?4:-4,d=1&new Date?4:-4,c=0,y=0,f=100,g=10,k=Math.min,p=Math.max,w=this.requestAnimationFrame,m=this.addEventListener,x=e.getContext("2d");h=a=r=t/2-50,x.font="40px Arial",m("resize",(()=>{t=e.width=this.innerWidth,i=e.height=this.innerHeight}));let u={};var v=e=>{u[e.keyCode]="keydown"==e.type,console.log("keyMap in listener",u)};m("keydown",v),m("keyup",v);let M,R=e=>{M||(M=e),e-M>1e3/60&&(console.log("keyMap in step",u),u[37]&&(l-=15),u[39]&&(l+=15),d>0&&(a+50-r+5>0&&(n-=5),a+50-r+5<10&&(n+=5)),h=k(p(h+l,0),t-f),a=k(p(a+n,0),t-f),(r<0||r>t-g)&&(s*=-1),(o<-10||o>i-g)&&(d*=-1,o>0&&c++,o<0&&y++,r=t/2,o=i/2),r>h&&r<h+f&&o<=g&&(d=k(-1.1*d,g)),r>a&&r<a+f&&o>=i-25&&(d=k(-1.1*d,g)),r+=s,o+=d,x.clearRect(0,0,t,i),x.fillStyle="#000",x.fillRect(h,0,f,g),x.fillRect(a,i-20,f,g),x.fillRect(r,o,g,g),x.fillStyle="#777",x.fillText(c,t/2-g,f),x.fillText(y,t/2-g,i-f),l=n=0,M=e),w(R)};w(R);
  </script>
</html>